# Ultimate Test 09: Project Scaffolding Skill

**Trigger:** "create project [NAME]" or "scaffold [TYPE] project" or "new [FRAMEWORK] app"

**Expected Duration:** 3-7 minutes for complete project setup

---

## Skill Instructions

When user asks to create a new project, follow these steps exactly:

### Phase 1: Requirements Gathering

1. **Parse request**: Extract:
   - Project name
   - Project type (web, API, CLI, library)
   - Framework/language (if specified)
   - Features (if specified)

2. **Set defaults** if not specified:
   - Type: "web application"
   - Language: Python or TypeScript (based on context)
   - Framework: Standard for language

3. **Create project directory**:
   - Create `OUTPUT/projects/[PROJECT_NAME]/`
   - IF directory exists: Add timestamp suffix or ask user

4. **Generate project spec**: Write to `OUTPUT/projects/[PROJECT_NAME]/PROJECT_SPEC.md`:
   ```
   # Project: [PROJECT_NAME]

   ## Overview
   - Type: [TYPE]
   - Language: [LANGUAGE]
   - Framework: [FRAMEWORK]
   - Created: [DATE]

   ## Features
   - [Feature 1]
   - [Feature 2]

   ## Structure
   [To be generated]

   ## Dependencies
   [To be generated]
   ```

### Phase 2: Directory Structure

5. **Create base structure** (Python example):
   ```
   [PROJECT_NAME]/
   ├── src/
   │   └── [project_name]/
   │       ├── __init__.py
   │       ├── main.py
   │       └── config.py
   ├── tests/
   │   ├── __init__.py
   │   └── test_main.py
   ├── docs/
   │   └── README.md
   ├── scripts/
   │   └── setup.sh
   ├── .gitignore
   ├── README.md
   ├── pyproject.toml
   └── requirements.txt
   ```

6. **Create base structure** (TypeScript/Node example):
   ```
   [PROJECT_NAME]/
   ├── src/
   │   ├── index.ts
   │   ├── config.ts
   │   └── types.ts
   ├── tests/
   │   └── index.test.ts
   ├── docs/
   │   └── README.md
   ├── scripts/
   │   └── setup.sh
   ├── .gitignore
   ├── .eslintrc.json
   ├── tsconfig.json
   ├── package.json
   └── README.md
   ```

7. **Write directory creation log**: Record all directories created

### Phase 3: Core Files

8. **Create main application file**:

   **Python (main.py)**:
   ```python
   """
   [PROJECT_NAME] - Main Application
   Generated by LoopCore
   """

   from .config import settings

   def main():
       """Application entry point."""
       print(f"Starting {settings.APP_NAME}...")
       # TODO: Implement main logic

   if __name__ == "__main__":
       main()
   ```

   **TypeScript (index.ts)**:
   ```typescript
   /**
    * [PROJECT_NAME] - Main Application
    * Generated by LoopCore
    */

   import { config } from './config';

   async function main(): Promise<void> {
     console.log(`Starting ${config.appName}...`);
     // TODO: Implement main logic
   }

   main().catch(console.error);
   ```

9. **Create configuration file**:

   **Python (config.py)**:
   ```python
   """Application configuration."""

   from pydantic_settings import BaseSettings

   class Settings(BaseSettings):
       APP_NAME: str = "[PROJECT_NAME]"
       DEBUG: bool = False
       LOG_LEVEL: str = "INFO"

       class Config:
           env_file = ".env"

   settings = Settings()
   ```

   **TypeScript (config.ts)**:
   ```typescript
   export const config = {
     appName: process.env.APP_NAME || '[PROJECT_NAME]',
     debug: process.env.DEBUG === 'true',
     logLevel: process.env.LOG_LEVEL || 'info',
   };
   ```

10. **Create test file**:

    **Python (test_main.py)**:
    ```python
    """Tests for main module."""

    import pytest
    from [project_name].main import main

    def test_main_runs():
        """Test that main function executes without error."""
        # This is a placeholder test
        assert True

    def test_placeholder():
        """Placeholder for future tests."""
        pass
    ```

    **TypeScript (index.test.ts)**:
    ```typescript
    import { describe, it, expect } from 'vitest';

    describe('[PROJECT_NAME]', () => {
      it('should run without errors', () => {
        expect(true).toBe(true);
      });
    });
    ```

### Phase 4: Configuration Files

11. **Create package manifest**:

    **Python (pyproject.toml)**:
    ```toml
    [project]
    name = "[project-name]"
    version = "0.1.0"
    description = "[PROJECT_NAME] - Generated by LoopCore"
    readme = "README.md"
    requires-python = ">=3.10"
    dependencies = [
        "pydantic-settings>=2.0.0",
    ]

    [project.optional-dependencies]
    dev = [
        "pytest>=7.0.0",
        "pytest-cov>=4.0.0",
        "black>=23.0.0",
        "mypy>=1.0.0",
    ]

    [project.scripts]
    [project-name] = "[project_name].main:main"

    [tool.pytest.ini_options]
    testpaths = ["tests"]

    [tool.black]
    line-length = 88
    target-version = ["py310"]

    [tool.mypy]
    python_version = "3.10"
    strict = true
    ```

    **TypeScript (package.json)**:
    ```json
    {
      "name": "[project-name]",
      "version": "0.1.0",
      "description": "[PROJECT_NAME] - Generated by LoopCore",
      "main": "dist/index.js",
      "types": "dist/index.d.ts",
      "scripts": {
        "build": "tsc",
        "dev": "tsx src/index.ts",
        "test": "vitest run",
        "test:watch": "vitest",
        "lint": "eslint src/",
        "format": "prettier --write src/"
      },
      "devDependencies": {
        "@types/node": "^20.0.0",
        "eslint": "^8.0.0",
        "prettier": "^3.0.0",
        "tsx": "^4.0.0",
        "typescript": "^5.0.0",
        "vitest": "^1.0.0"
      }
    }
    ```

12. **Create .gitignore**:
    ```
    # Dependencies
    node_modules/
    __pycache__/
    *.pyc
    .venv/
    venv/

    # Build
    dist/
    build/
    *.egg-info/

    # IDE
    .idea/
    .vscode/
    *.swp

    # Environment
    .env
    .env.local

    # Testing
    coverage/
    .coverage
    htmlcov/

    # OS
    .DS_Store
    Thumbs.db
    ```

13. **Create TypeScript config** (if TypeScript):
    ```json
    {
      "compilerOptions": {
        "target": "ES2022",
        "module": "NodeNext",
        "moduleResolution": "NodeNext",
        "lib": ["ES2022"],
        "outDir": "./dist",
        "rootDir": "./src",
        "strict": true,
        "esModuleInterop": true,
        "skipLibCheck": true,
        "declaration": true
      },
      "include": ["src/**/*"],
      "exclude": ["node_modules", "dist"]
    }
    ```

### Phase 5: Documentation

14. **Create README.md**:
    ```markdown
    # [PROJECT_NAME]

    > [One-line description]

    ## Quick Start

    ### Prerequisites
    - [Language] [version]+
    - [Other requirements]

    ### Installation

    ```bash
    # Clone the repository
    git clone [REPO_URL]
    cd [PROJECT_NAME]

    # Install dependencies
    [package manager] install

    # Run the application
    [run command]
    ```

    ## Development

    ```bash
    # Run tests
    [test command]

    # Run linter
    [lint command]

    # Build for production
    [build command]
    ```

    ## Project Structure

    ```
    [Generated structure here]
    ```

    ## Configuration

    | Variable | Description | Default |
    |----------|-------------|---------|
    | `APP_NAME` | Application name | [PROJECT_NAME] |
    | `DEBUG` | Enable debug mode | false |
    | `LOG_LEVEL` | Logging level | INFO |

    ## License

    [LICENSE]

    ---
    Generated by LoopCore on [DATE]
    ```

15. **Create docs/README.md**:
    ```markdown
    # [PROJECT_NAME] Documentation

    ## Table of Contents

    1. [Getting Started](./getting-started.md)
    2. [Configuration](./configuration.md)
    3. [API Reference](./api.md)
    4. [Contributing](./contributing.md)

    ## Overview

    [Detailed project description]

    ## Architecture

    [Architecture diagram or description]
    ```

### Phase 6: Setup Scripts

16. **Create setup script**: Write to `scripts/setup.sh`:
    ```bash
    #!/bin/bash
    # Setup script for [PROJECT_NAME]

    set -e

    echo "Setting up [PROJECT_NAME]..."

    # Check prerequisites
    command -v [language] >/dev/null 2>&1 || { echo "[Language] is required"; exit 1; }

    # Create virtual environment (Python)
    # python -m venv .venv
    # source .venv/bin/activate

    # Install dependencies
    [package manager] install

    # Copy environment file
    if [ ! -f .env ]; then
        cp .env.example .env 2>/dev/null || echo "# Environment variables" > .env
        echo "Created .env file"
    fi

    # Run initial setup
    # [Additional setup commands]

    echo "Setup complete! Run '[run command]' to start."
    ```

17. **Create .env.example**:
    ```
    # Environment Configuration
    # Copy this to .env and fill in values

    APP_NAME=[PROJECT_NAME]
    DEBUG=false
    LOG_LEVEL=INFO

    # Add other configuration variables below
    ```

### Phase 7: Completion

18. **Verify all files created**: Read back each file, confirm exists

19. **Generate file manifest**: Write to `OUTPUT/projects/[PROJECT_NAME]/MANIFEST.md`:
    ```
    # Project Manifest: [PROJECT_NAME]

    ## Files Created

    | File | Purpose | Size |
    |------|---------|------|
    | src/main.py | Application entry | X bytes |
    | ... | ... | ... |

    ## Next Steps

    1. cd [PROJECT_NAME]
    2. Run setup: `./scripts/setup.sh`
    3. Configure: Edit `.env`
    4. Start developing!

    ## Commands

    | Action | Command |
    |--------|---------|
    | Install | `[install command]` |
    | Run | `[run command]` |
    | Test | `[test command]` |
    | Build | `[build command]` |
    ```

20. **Remember project**: Store in memory:
    - "Created project [PROJECT_NAME] on [DATE]"
    - "Type: [TYPE], Language: [LANGUAGE]"
    - "Location: OUTPUT/projects/[PROJECT_NAME]/"

21. **Report to user**:
    - "Project [PROJECT_NAME] created successfully"
    - "[N] files generated"
    - "Location: OUTPUT/projects/[PROJECT_NAME]/"
    - "Next: Run `./scripts/setup.sh` to get started"

---

## Error Handling

- IF project directory exists: Ask user to confirm overwrite or use different name
- IF language not supported: List supported languages, ask for selection
- IF file write fails: Log error, continue with other files, report partial success
- IF template missing: Use minimal defaults, note in manifest

---

## Success Criteria

- [ ] Complete directory structure created
- [ ] Main application file with boilerplate
- [ ] Configuration system in place
- [ ] Test file with example test
- [ ] Package manifest (pyproject.toml / package.json)
- [ ] .gitignore appropriate for language
- [ ] README with getting started instructions
- [ ] Setup script executable
- [ ] Environment example file
- [ ] Memory updated with project record
